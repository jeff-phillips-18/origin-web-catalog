<div class="services-view" ng-style="$ctrl.viewStyle">
  <div ng-if="!$ctrl.loaded" class="spinner-container">
    <div class="spinner spinner-xl"></div>
  </div>
  <div ng-if="$ctrl.loaded" class="services-view-container mobile-{{$ctrl.mobileView}}-view">
    <div class="add-methods">
      <h1>Browse Catalog</h1>
      <!-- TODO:  make it so add-other links only appear if cb exists -->
      <ul class="add-other">
        <li>
          <a href="" ng-click="$ctrl.deployImageClicked()">Deploy Image</a>
        </li>
        <li>
          <a href="" ng-click="$ctrl.fromFileClicked()">Import <span class="import-file-types">YAML / JSON</span></a>
        </li>
      </ul>
    </div>
    <ul class="nav nav-tabs nav-tabs-pf services-categories">
      <li ng-repeat="category in $ctrl.categories"
          ng-if="category.hasItems"
          ng-class="{ active: $ctrl.currentFilter === category.id }">
        <a href="" id="{{'category-'+category.id}}" class="services-category-heading" ng-click="$ctrl.selectCategory(category.id)">{{category.label}}</a>
        <a ng-click="$ctrl.mobileView = 'categories'" class="services-back-link" href="">Back</a>
      </li>
    </ul>

    <div class="services-inner-container">
      <!-- Do not show sub-category items for 'All' or 'Other' main categories -->
      <ul class="services-sub-categories"
          ng-if="$ctrl.currentFilter !== 'other' && $ctrl.currentFilter !== 'all'">
        <li ng-repeat="subCategory in $ctrl.subCategories track by subCategory.id"
             ng-if="subCategory.hasItems"
             ng-attr-id="{{subCategory.id}}"
             class="services-sub-category"
             ng-class="{ active: $ctrl.currentSubFilter === subCategory.id }">
          <a href="" id="{{'services-sub-category-'+subCategory.id}}"
             class="services-sub-category-tab" ng-click="$ctrl.selectSubCategory(subCategory.id)">
            <div class="services-sub-category-tab-image" ng-if="subCategory.imageUrl">
              <img ng-src="{{subCategory.imageUrl}}" alt="">
            </div>
            <div class="services-sub-category-tab-icon {{subCategory.icon}}" ng-if="subCategory.icon && !subCategory.imageUrl"></div>
            <div class="services-sub-category-tab-name">{{subCategory.label}}</div>
          </a>
         <a ng-click="$ctrl.mobileView = 'subcategories'" class="services-back-link" href="">Back</a>
          <div ng-if="$ctrl.currentSubFilter === subCategory.id" class="services-items">
            <pf-filter config="$ctrl.filterConfig" class="services-items-filter"></pf-filter>
            <a href="" class="services-item" ng-repeat="item in $ctrl.filteredItems track by item.resource.metadata.uid" ng-click="$ctrl.serviceViewItemClicked(item)">
              <div ng-if="!item.imageUrl" class="services-item-icon">
                <span class="{{item.iconClass}}"></span>
              </div>
              <div ng-if="item.imageUrl" class="services-item-icon">
                <img ng-src="{{item.imageUrl}}" alt="">
              </div>
              <div class="services-item-name" title="{{item.name}}">
                {{item.name}}
              </div>
            </a>
          </div>
        </li>
      </ul>

      <!-- Show catalog item for 'All' and 'Other' main categories -->
      <div ng-if="$ctrl.currentFilter === 'other' || $ctrl.currentFilter === 'all'" class="services-no-sub-categories">
        <div class="services-items">
          <div ng-if="$ctrl.isEmpty">There are no catalog items.</div>
          <pf-filter ng-if="!$ctrl.isEmpty" config="$ctrl.filterConfig" class="services-items-filter"></pf-filter>
          <a href="" class="services-item" ng-repeat="item in $ctrl.filteredItems track by item.resource.metadata.uid" ng-click="$ctrl.serviceViewItemClicked(item)">
            <div ng-if="!item.imageUrl" class="services-item-icon">
              <span class="{{item.iconClass}}"></span>
            </div>
            <div ng-if="item.imageUrl" class="services-item-icon">
              <img ng-src="{{item.imageUrl}}" alt="">
            </div>
            <div class="services-item-name" title="{{item.name}}">
              {{item.name}}
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
